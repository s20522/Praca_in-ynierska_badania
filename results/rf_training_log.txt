================================================================================
REPRODUKCJA MODELU RANDOM FOREST
================================================================================

================================================================================
ETAP 1: WCZYTANIE I PRZYGOTOWANIE DANYCH
================================================================================

Rozmiar zbioru danych: 299 wierszy, 13 kolumn
Rozkład klasy celu: {0: 203, 1: 96}

Wybrane cechy do modelowania: ['age', 'ejection_fraction', 'serum_creatinine']
Uzasadnienie: Najwyższa istotność statystyczna w analizie Coksa (bez 'time')

Kształt macierzy cech (X): (299, 3)
Kształt wektora celu (y): (299,)

================================================================================
ETAP 2: PODZIAŁ DANYCH
================================================================================

Zbiór treningowy: 239 próbek
Zbiór testowy: 60 próbek

Rozkład klas w zbiorze treningowym:
DEATH_EVENT
0    162
1     77
Name: count, dtype: int64

Rozkład klas w zbiorze testowym:
DEATH_EVENT
0    41
1    19
Name: count, dtype: int64

================================================================================
ETAP 3: NORMALIZACJA DANYCH
================================================================================

Zastosowano StandardScaler (standaryzacja)
Średnie po standaryzacji (zbiór treningowy):
[ 2.19257434e-16 -2.22044605e-16  1.41216653e-16]

Odchylenia standardowe po standaryzacji (zbiór treningowy):
[1. 1. 1.]

================================================================================
ETAP 4: OPTYMALIZACJA HIPERPARAMETRÓW
================================================================================

Przestrzeń hiperparametrów:
  n_estimators: [50, 100, 200, 300, 500]
  max_depth: [None, 10, 20, 30, 40, 50]
  min_samples_split: [2, 5, 10, 15]
  min_samples_leaf: [1, 2, 4, 8]
  max_features: ['sqrt', 'log2', None]
  bootstrap: [True, False]
  class_weight: ['balanced', 'balanced_subsample', None]

Rozpoczynanie Randomized Search CV...
Liczba iteracji: 100
Strategia walidacji krzyżowej: Stratified 5-Fold
Fitting 5 folds for each of 100 candidates, totalling 500 fits

✓ Optymalizacja zakończona!

Najlepsze parametry:
  n_estimators: 100
  min_samples_split: 5
  min_samples_leaf: 8
  max_features: None
  max_depth: 50
  class_weight: balanced
  bootstrap: True

Najlepszy F1-score (CV): 0.7018

================================================================================
ETAP 5: TRENING FINALNEGO MODELU
================================================================================

Trening modelu Random Forest z optymalnymi hiperparametrami...
✓ Trening zakończony!

================================================================================
ETAP 6: PREDYKCJA I EWALUACJA
================================================================================

--------------------------------------------------------------------------------
WYNIKI NA ZBIORZE TESTOWYM
--------------------------------------------------------------------------------
Accuracy:  0.7333 (73.33%)
Precision: 0.5484 (54.84%)
Recall:    0.8947 (89.47%)
F1-score:  0.6800 (68.00%)
AUC-ROC:   0.7689

--------------------------------------------------------------------------------
MACIERZ POMYŁEK
--------------------------------------------------------------------------------
True Negatives (TN):  27
False Positives (FP): 14
False Negatives (FN): 2
True Positives (TP):  17

--------------------------------------------------------------------------------
RAPORT KLASYFIKACJI
--------------------------------------------------------------------------------
              precision    recall  f1-score   support

     Przeżył       0.93      0.66      0.77        41
       Zmarł       0.55      0.89      0.68        19

    accuracy                           0.73        60
   macro avg       0.74      0.78      0.73        60
weighted avg       0.81      0.73      0.74        60


================================================================================
ETAP 7: WALIDACJA KRZYŻOWA (5-FOLD)
================================================================================

Wyniki walidacji krzyżowej (5-Fold):

Accuracy:
  Średnia: 0.7629 ± 0.0646
  Poszczególne foldy: [0.75       0.68333333 0.75       0.75       0.88135593]

F1-score:
  Średnia: 0.6661 ± 0.0857
  Poszczególne foldy: [0.63414634 0.55813953 0.66666667 0.65116279 0.82051282]

AUC-ROC:
  Średnia: 0.8233 ± 0.0554
  Poszczególne foldy: [0.79204108 0.76765083 0.85109114 0.786875   0.91907895]

================================================================================
ETAP 8: WAŻNOŚĆ CECH
================================================================================

Ważność cech (Feature Importance):
  age: 0.2017 (20.17%)
  ejection_fraction: 0.3376 (33.76%)
  serum_creatinine: 0.4607 (46.07%)

================================================================================
ETAP 9: ZAPISANIE WYNIKÓW
================================================================================

✓ Wyniki zapisane do: results/random_forest_results.txt
✓ Dane do wizualizacji zapisane

================================================================================
REPRODUKCJA MODELU RANDOM FOREST ZAKOŃCZONA POMYŚLNIE
================================================================================
